---
alwaysApply: true
---

# PROJECT: Movie / Book Library

## PURPOSE

Define a small fullstack application that manages a library of movies and books, with a React client and a .NET Web API backend.

The application should:

-   Provide a clean CRUD API for library items
-   Provide a simple React UI to list, view, create, edit, and delete items
-   Be easy to understand, extend, and run locally

The scope is intentionally small and focused.

---

## HIGH-LEVEL DESCRIPTION

Build a **Movie / Book Library** app where a user can:

-   View a list of all items (movies and books)
-   Filter list by type (movies / books)
-   View details for a single item
-   Create a new item
-   Edit an existing item
-   Delete an item

Data may be stored:

-   In memory, or
-   In a simple local database (e.g. EF Core InMemory or SQLite)

---

## TECH STACK

### Backend (API)

-   Language: C#
-   Runtime: .NET 8 (or latest LTS installed)
-   Project type: ASP.NET Core Web API
-   Suggested structure:
    -   `Controllers/` – HTTP endpoints
    -   `Services/` – business logic
    -   `Repositories/` – data access abstraction
    -   `Models/` – domain entities
    -   `Dtos/` – request/response DTOs
-   Patterns:
    -   Dependency Injection
    -   DTO mapping
    -   Simple error handling (NotFound / BadRequest / Created)

### Frontend (Client)

-   Framework: React
-   Language: JavaScript
-   Tooling: Vite (React template, JavaScript)
-   Router: React Router
-   Suggested structure:
    -   `src/pages/` – page-level components (list, detail, form)
    -   `src/components/` – reusable UI pieces
    -   `src/api/` – API helper functions
    -   `src/hooks/` (optional) – data-fetching hooks

---

## DIRECTORY STRUCTURE (TARGET)

At repo root:

```text
movie-book-library/
  api/        # .NET Web API project
  client/     # React app
  cursor/     # Cursor rule files (.mdc)
  README.md   # Project overview
  .gitignore
```

Inside `api/`:

```text
api/
  Controllers/
    LibraryItemsController.cs
  Services/
    ILibraryItemService.cs
    LibraryItemService.cs
  Repositories/
    ILibraryItemRepository.cs
    InMemoryLibraryItemRepository.cs
    # or EfLibraryItemRepository.cs if EF Core is used
  Models/
    LibraryItem.cs
  Dtos/
    LibraryItemDto.cs
    CreateLibraryItemDto.cs
    UpdateLibraryItemDto.cs
  Program.cs
  appsettings.json
  api.csproj
```

Inside `client/` (Vite example):

```text
client/
  index.html
  vite.config.js
  package.json
  src/
    main.jsx
    App.jsx
    api/
      libraryApi.js
    pages/
      LibraryListPage.jsx
      ItemDetailPage.jsx
      ItemFormPage.jsx
    components/
      Layout.jsx
      ItemCard.jsx
      Navbar.jsx
```

---

## DOMAIN MODEL

### Entity: LibraryItem

A single model for both movies and books.

Properties (suggested):

-   `id` (GUID or number)
-   `title` (string, required)
-   `type` (string, required: `"movie"` or `"book"`)
-   `year` (int, optional)
-   `status` (string, e.g. `"unwatched"`, `"watching"`, `"watched"` or `"unread"`, `"reading"`, `"finished"`)
-   `rating` (int, optional, 1–5)
-   `notes` (string, optional)

You can adjust fields as needed, but keep it small.

---

## BACKEND REQUIREMENTS

Base route: `/api/libraryitems`

Endpoints:

-   `GET /api/libraryitems`

    -   Returns list of items
    -   Optional query params: `type` (movie/book) for filtering

-   `GET /api/libraryitems/{id}`

    -   Returns single item by id
    -   404 if not found

-   `POST /api/libraryitems`

    -   Accepts `CreateLibraryItemDto`
    -   Validates required fields
    -   Returns 201 Created with created item and Location header

-   `PUT /api/libraryitems/{id}`

    -   Accepts `UpdateLibraryItemDto`
    -   Updates existing item
    -   404 if not found

-   `DELETE /api/libraryitems/{id}`

    -   Deletes item
    -   204 No Content on success
    -   404 if not found

Validation rules (minimum):

-   `title` is required, non-empty
-   `type` is required and must be `"movie"` or `"book"`

Error handling:

-   On invalid input: return 400 with a simple error message
-   On missing item: return 404

Data storage:

-   Start with an in-memory repository (`InMemoryLibraryItemRepository`)
-   Optionally swap to EF Core later (not required for MVP)

---

## FRONTEND REQUIREMENTS

### Routing

Suggested routes:

-   `/` → Library list page
-   `/items/new` → Create form
-   `/items/:id` → Detail view
-   `/items/:id/edit` → Edit form

### Pages

1. **LibraryListPage**

    - Fetch all items from API
    - Optional filter by type (`movie` / `book`)
    - Display items using `ItemCard` component
    - Buttons/links:

        - “Add new item” → `/items/new`
        - Click item to go to detail page

2. **ItemDetailPage**

    - Fetch single item by `id`
    - Show full details
    - Actions:

        - “Edit” → `/items/:id/edit`
        - “Delete” → deletes item via API, then navigates back to list
        - “Back” → returns to `/`

3. **ItemFormPage**

    - Used for both create and edit:

        - If route is `/items/new` → POST on submit
        - If route is `/items/:id/edit` → load item, then PUT on submit

    - Fields:

        - title (text)
        - type (select: movie/book)
        - year (number)
        - status (select or text)
        - rating (number or select 1–5)
        - notes (textarea)

    - Basic client-side validation:

        - `title` required
        - `type` required

### API Helper (frontend)

`src/api/libraryApi.js`:

-   `getAll(params)`
-   `getById(id)`
-   `create(data)`
-   `update(id, data)`
-   `remove(id)`

Each function:

-   Calls the appropriate backend endpoint
-   Throws an error or returns a simple result on failure
-   Uses a base URL like `http://localhost:5000/api/libraryitems` (adjust to actual port)

---

## NON-GOALS

The following are explicitly **out of scope** for this project:

-   Authentication / authorization
-   Role-based access
-   Advanced error logging, monitoring, or metrics
-   Complex state management (Redux, Zustand, etc.)
-   Design systems or component libraries (MUI, Chakra, etc.)
-   Docker, Kubernetes, or cloud deployment
-   CI/CD pipelines

---

## ASSISTANT TASKS (FOR CURSOR OR AI AGENT)

When this file is present, the assistant should:

1. Create the `api/` .NET Web API project with the structure above.
2. Implement:

    - `LibraryItem` model
    - DTOs
    - Repository interface + in-memory implementation
    - Service with CRUD methods
    - Controller exposing the required endpoints

3. Create the `client/` React project (Vite or CRA) with the structure above.
4. Implement:

    - API helper in `src/api/libraryApi.js`
    - Pages: `LibraryListPage`, `ItemDetailPage`, `ItemFormPage`
    - Basic routing in `App.jsx`
    - Minimal components for layout and item display

5. Ensure the end-to-end flow works:

    - User can create, view, edit, and delete library items via the UI.

```

```
